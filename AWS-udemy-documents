IMA & AWS CLI
BÃ i 12: IAM introduction: Users, Groups, Polices
IAM = identity and Access Management, Global service

BÃ i 13: IAM Policies
Step 1:
TÃ¬m kiáº¿m IAM trÃªn thanh search -> sau Ä‘Ã³ click vÃ o Users bÃªn thanh sidebar -> createa user ->
                                * Specify user details -> User name (duyduc) -> tÃ­ch chá»n Provide user access to the AWS Management Console -> User type (tÃ­ch chá»n i want to create an IAM user) -> tÃ­ch chá»n Custom password vÃ  Ä‘áº·t máº­t kháº©u vÃ  bá» tÃ­ch chá»n User must create a new password at the next signin -> next

Step 2:
Click chá»n Create group -> trong create user group -> User group name -> tÃ­ch chá»n AdministratorAccess -> Create User Group -> sau khi táº¡o xong sáº½ tÃ­ch chá»n admin Ä‘Ã£ xuáº¥t hiá»‡n trong Group name -> xuá»‘ng Tags chá»n Add new tag -> key (department) && value-optional (Engineering) 

Step 3:
Sau khi Ä‘Äƒng nháº­p xong cÃ³ thá»ƒ quay láº¡i trang dashboard cá»§a IAM rá»“i -> Create trong Account Alias -> Ä‘á»ƒ edit láº¡i Sign-in URL for IAM users in this account 

-> BÃ i há»c rÃºt ra trong bÃ i nÃ y lÃ  phÃ¢n quyá»n ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra trong IAM user 

BÃ i 14: IAM Policies
IAM Policies (chÃ­nh sÃ¡ch IAM) trong AWS Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ quáº£n lÃ½ quyá»n truy cáº­p (permissions) cho ngÆ°á»i dÃ¹ng, nhÃ³m, hoáº·c dá»‹ch vá»¥ trong há»‡ thá»‘ng AWS.

BÃ i 15: IAM Policies Hands On
// remove quyá»n cá»§a má»™t User
VÃ o User -> á»Ÿ pháº§n group click vÃ  sá»‘ 1 á»Ÿ dÆ°á»›i -> click vÃ o admin -> tÃ­ch chá»n user á»Ÿ dÆ°á»›i -> sau Ä‘Ã³ remove => dÃ¹ng Ä‘á»ƒ xoÃ¡ quyá»n cá»§a má»™t user
// Add thÃªm quyá»n cho má»™t User
VÃ o User Ä‘Ã³ trong Permisstions policies -> chá»n Add permissions -> chá»n Attach policies directly -> sáº½ xuáº¥t hiá»‡n Permissions policies (tÃ­ch chá»n quyá»n theo yÃªu cáº§u) -> next
// CÃ³ thá»ƒ táº¡o group sau Ä‘Ã³ thÃªm User Ä‘Ã³ vÃ o group
vÃ o User groups -> create group -> User group name (Ä‘áº·t tÃªn group) -> á»Ÿ Attach permissions policies - Optional tÃ­ch chá»n quyá»n (vÃ­ dá»¥ AdministratorAccess) -> Create user group 
-> sau khi táº¡o xong vÃ o group Ä‘Ã£ táº¡o -> chá»n Add users -> thÃªm user vÃ o trong -> click Add users

BÃ i 16: IAM MFA 
=> NÃ³i vá» báº£o máº­t 

BÃ i 17: IAM MFA Hands On
- VÃ o Account settings bÃªn thanh sidebar trong IAM -> click vÃ o Edit -> sáº½ xuáº¥t hiá»‡n Edit password policy -> custom password

ğŸ§ª BÆ°á»›c 1: Truy cáº­p trang quáº£n lÃ½ IAM
- VÃ o AWS Console: https://console.aws.amazon.com/
- GÃµ â€œIAMâ€ trong thanh tÃ¬m kiáº¿m vÃ  chá»n dá»‹ch vá»¥ IAM
- Trong sidebar trÃ¡i, chá»n Users
- Nháº¥p vÃ o tÃªn ngÆ°á»i dÃ¹ng (IAM User) mÃ  báº¡n muá»‘n báº­t MFA

ğŸ§ª BÆ°á»›c 2: Cáº¥u hÃ¬nh MFA
- Trong trang ngÆ°á»i dÃ¹ng, chá»n tab Security credentials
- KÃ©o xuá»‘ng pháº§n Multi-factor authentication (MFA)
- Nháº¥n Assign MFA device

ğŸ§ª BÆ°á»›c 3: Chá»n loáº¡i thiáº¿t bá»‹
- Chá»n Authenticator app (á»©ng dá»¥ng xÃ¡c thá»±c) â†’ Nháº¥n Next
- TrÃªn mÃ n hÃ¬nh sáº½ xuáº¥t hiá»‡n QR code

ğŸ§ª BÆ°á»›c 4: CÃ i Ä‘áº·t trÃªn Ä‘iá»‡n thoáº¡i
- Má»Ÿ á»©ng dá»¥ng Google Authenticator hoáº·c Authy
- Chá»n â€œAdd accountâ€ â†’ QuÃ©t mÃ£ QR tá»« AWS Console
- á»¨ng dá»¥ng sáº½ táº¡o ra mÃ£ OTP (6 sá»‘, thay Ä‘á»•i má»—i 30 giÃ¢y)

ğŸ§ª BÆ°á»›c 5: XÃ¡c thá»±c vÃ  hoÃ n táº¥t
- Quay láº¡i AWS Console, nháº­p hai mÃ£ OTP liÃªn tiáº¿p tá»« app (pháº£i chÃ­nh xÃ¡c)
- Nháº¥n Assign MFA
ğŸ‰ HoÃ n táº¥t! IAM User Ä‘Ã³ Ä‘Ã£ báº­t MFA.

BÃ i 18: AWS Access Keys, CLI and SDK
How can users access AWS ?
To access AWS, you have three options
   1. AWS Manament Console (protected by password + MFA)
   2. AWS Command Line Interface (CLI): protected by access keys
   3. AWS Software Developer Kit (SDK) - for code 

BÃ i 19 + BÃ i 20 + BÃ i 21:
How to install AWS CLI for windows , MacOs , Linux
// Documents cÃ i Ä‘áº·t cho 3 ná»n táº£ng trÃªn
https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html

BÃ i 22: AWS CLI Hands On
// Muá»‘n táº¡o Access key 
ğŸ‘¤ BÆ°á»›c 2: Má»Ÿ trang quáº£n lÃ½ IAM

- TrÃªn thanh Ä‘iá»u hÆ°á»›ng, chá»n Services â†’ tÃ¬m vÃ  chá»n IAM.
- Trong thanh bÃªn trÃ¡i, chá»n Users.
- Nháº¥p vÃ o tÃªn ngÆ°á»i dÃ¹ng IAM mÃ  báº¡n muá»‘n táº¡o Access Key.

ğŸ”‘ BÆ°á»›c 3: Táº¡o Access Key
- Trong trang chi tiáº¿t cá»§a user, chá»n tab Security credentials.
- Cuá»™n xuá»‘ng pháº§n Access keys.
- Nháº¥n nÃºt Create access key.
- Trong bÆ°á»›c chá»n cÃ¡ch dÃ¹ng:
Nháº¥n Next vÃ  Create access key.

// SSH vÃ o server 
- aws configure
        Access Key ID: {Ä‘iá»n Access key Ä‘Ã£ táº¡o}
        Secret Access Key: {Ä‘iá»n Secret Access Key Ä‘Ã£ táº¡o}
        Region (vÃ­ dá»¥: ap-southeast-1)
        Output format (vÃ­ dá»¥: json)
- aws iam list-users // dÃ¹ng Ä‘á»ƒ xem táº¥t cÃ  User 

BÃ i 24: AWS CloudShell 
Shell má»™t biá»ƒu tÆ°á»£ng náº±m trÃªn thanh header cá»§a aws -> click vÃ o nÃ³
- Thao tÃ¡c cÃ¡c lá»‡nh tÆ°Æ¡ng tá»± nhÆ° trÃªn Ubuntu Linux

BÃ i 25: IAM Roles for AWS Services
- IAM Role for AWS Service lÃ  má»™t vai trÃ² (role) IAM mÃ  báº¡n gÃ¡n cho má»™t dá»‹ch vá»¥ AWS (nhÆ° EC2, Lambda, ECS...) Ä‘á»ƒ cáº¥p quyá»n truy cáº­p Ä‘áº¿n cÃ¡c dá»‹ch vá»¥ AWS khÃ¡c

BÃ i 26: IAM Roles Hands On
- VÃ o Roles cá»§a IAM -> chá»n Create Roles -> Chá»n AWS service -> Use case (chá»n dá»‹ch vá»¥ nhÆ° EC2 hoáº·c Lambda) -> Next
- á»Ÿ Permissions policies -> tÃ¬m kiáº¿m trÃªn thanh search (tuá»³ chá»n quyá»n báº¡n cho dá»‹ch vá»¥ Ä‘Ã³ vÃ­ dá»¥ nhÆ° IAMReading) -> Next

BÃ i 27: IAM Security Tools
- IAM Security Tools
DÃ¹ng Ä‘á»ƒ:
* Táº¡o bÃ¡o cÃ¡o CSV cho toÃ n bá»™ IAM user trong tÃ i khoáº£n AWS:
* Láº§n cuá»‘i sá»­ dá»¥ng password, access key
* MFA Ä‘Ã£ báº­t chÆ°a
* Password cÅ©, háº¿t háº¡n chÆ°aâ€¦
Má»¥c Ä‘Ã­ch:
- Kiá»ƒm tra ngÆ°á»i dÃ¹ng cÃ³ tuÃ¢n thá»§ báº£o máº­t khÃ´ng, cÃ³ Ä‘ang dÃ¹ng access key cÅ©/máº¥t an toÃ n khÃ´ng.

BÃ i 28: IAM Security Tools hands On
- VÃ o User trong IAM - click vÃ o má»™t user báº¥t ká»³ -> chon Last Accessed => Ä‘á»ƒ xem hÃ nh Ä‘á»™ng gáº§n nháº¥t 

BÃ i 29: IAM Best Practice
- khÃ´ng sá»­ dá»¥ng tÃ i khoáº£n root ngoáº¡i trá»« khi thiáº¿t láº­p tÃ i khoáº£n AWS
- Má»™t ngÆ°á»i dÃ¹ng váº­t lÃ½ = Má»™t ngÆ°á»i dÃ¹ng AWS
- Chá»‰ Ä‘á»‹nh ngÆ°á»i dÃ¹ng vÃ o nhÃ³m vÃ  chá»‰ Ä‘á»‹nh quyá»n cho nhÃ³m
- Táº¡o máº­t kháº©u máº¡nh 
- Sá»­ dá»¥ng vÃ  thá»±c thi viá»‡c sá»­ dá»¥ng XÃ¡c thá»±c Ä‘a yáº¿u tá»‘
- Táº¡o vÃ  sá»­ dá»¥ng Vai trÃ² Ä‘á»ƒ cáº¥p quyá»n cho cÃ¡c dá»‹ch vá»¥ AWS
- Sá»­ dá»¥ng Key cáº­p Ä‘á»ƒ truy cáº­p theo chÆ°Æ¡ng trÃ¬nh
- Kiá»ƒm tra quyá»n cá»§a tÃ i khoáº£n cá»§a báº¡n báº±ng BÃ¡o cÃ¡o thÃ´ng tin xÃ¡c thá»±c IAM & Cá»‘ váº¥n truy cáº­p IAM
- KhÃ´ng bao giá» chia sáº» tÃ i khoáº£n IAM users vÃ  Access Keys

BÃ i 30: IAM Summary 
- Users: má»—i IAM User Ä‘Æ°á»£c táº¡o ra cho má»™t ngÆ°á»i tháº­t cá»¥ thá»ƒ chá»© khÃ´ng pháº£i cho á»©ng dá»¥ng hay dá»‹ch vá»¥
- Groups: Groups chá»‰ chá»©a Users
- Policies:  JSON dÃ¹ng Ä‘á»ƒ khai bÃ¡o quyá»n (permissions) mÃ  má»™t user, group hoáº·c role Ä‘Æ°á»£c phÃ©p thá»±c hiá»‡n trÃªn AWS.
- Roles: Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ EC2 hoáº·c dá»‹ch vá»¥ AWS sá»­ dá»¥ng
- Security: MFA + Password Policy
- AWS CLI: quáº£n lÃ½ cÃ¡c dá»‹ch vá»¥ AWS cá»§a báº¡n báº±ng cÃ¡ch sá»­ dá»¥ng dÃ²ng lá»‡nh

// EC2 Fundamentals
BÃ i 31: AWS Budget Setup
- VÃ o user root -> click chá»n account trÃªn thanh header -> chá»n Account -> kÃ©o xuá»‘ng IAM user and role access -> click chá»n Edit -> tÃ­ch chá»n Activate IAM Access -> update
- quay láº¡i User IAM -> nháº¥n vÃ o Accout vÃ  chá»n Billing and Cost Management -> 
- bÃªn thanh sidebar -> kÃ©o xuá»‘ng Budgets -> click Create budget -> á»Ÿ pháº§n Email recipients (Ä‘iá»n Email cáº§n alert vÃ o bÃªn trong) -> Create Budget

BÃ i 32: EC2 Basics
- EC2 lÃ  má»™t trong nhá»¯ng sáº£n pháº©m phá»• biáº¿n nháº¥t trong AWS
- EC2 viáº¿t táº¯t cá»§a Elastic Compute Cloud (CÆ¡ sá»Ÿ háº¡ táº§ng)

1. Renting virtual machines (EC2)
ğŸ‘‰ EC2 (Elastic Compute Cloud) cho phÃ©p báº¡n thuÃª mÃ¡y áº£o (virtual server) Ä‘á»ƒ cháº¡y á»©ng dá»¥ng, web, backend...
* Báº¡n cÃ³ thá»ƒ chá»n cáº¥u hÃ¬nh CPU, RAM, OS (Linux/Windows)
* Tráº£ phÃ­ theo giá» hoáº·c theo giÃ¢y
* TÆ°Æ¡ng Ä‘Æ°Æ¡ng nhÆ° thuÃª mÃ¡y chá»§ á»Ÿ trung tÃ¢m dá»¯ liá»‡u
ğŸ–¥ï¸ VÃ­ dá»¥: Cháº¡y backend Java hoáº·c webserver Nginx trÃªn EC2.

2. Storing data on virtual drives (EBS)
ğŸ‘‰ EBS (Elastic Block Store) lÃ  á»• Ä‘Ä©a áº£o gáº¯n vÃ o EC2.
* Giá»‘ng nhÆ° á»• cá»©ng cá»§a mÃ¡y tháº­t
* LÆ°u trá»¯ dá»¯ liá»‡u: database, file, app log
* CÃ³ thá»ƒ backup (snapshot), má»Ÿ rá»™ng dung lÆ°á»£ng
ğŸ’¾ VÃ­ dá»¥: EC2 cháº¡y MySQL, dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trÃªn EBS.

3. Distributing load across machines (ELB)
ğŸ‘‰ ELB (Elastic Load Balancer) giÃºp phÃ¢n phá»‘i lÆ°u lÆ°á»£ng truy cáº­p Ä‘áº¿n nhiá»u EC2.
* Tá»± Ä‘á»™ng chia táº£i giá»¯a cÃ¡c server
* Náº¿u 1 EC2 cháº¿t â†’ ELB bá» qua, chuyá»ƒn lÆ°u lÆ°á»£ng sang EC2 khÃ¡c
Há»— trá»£ HTTP(S), TCP, gRPC,...
ğŸŒ VÃ­ dá»¥: Website cÃ³ 3 EC2 â†’ ELB chia Ä‘á»u lÆ°á»£t truy cáº­p.

4. Scaling the services using an auto scaling group (ASG)
ğŸ‘‰ ASG (Auto Scaling Group) giÃºp tá»± Ä‘á»™ng tÄƒng/giáº£m sá»‘ lÆ°á»£ng EC2 theo nhu cáº§u.
* Náº¿u ngÆ°á»i dÃ¹ng tÄƒng â†’ tá»± táº¡o thÃªm EC2
* Náº¿u Ã­t ngÆ°á»i dÃ¹ng â†’ giáº£m EC2 Ä‘á»ƒ tiáº¿t kiá»‡m tiá»n
* Káº¿t há»£p vá»›i CloudWatch (theo dÃµi CPU, RAM)
ğŸ“ˆ VÃ­ dá»¥: TÄƒng EC2 khi CPU > 70% trong 5 phÃºt.

5. EFS lÃ  gÃ¬?
ğŸ‘‰ Amazon EFS lÃ  dá»‹ch vá»¥ lÆ°u trá»¯ dáº¡ng tá»‡p (file storage) cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng linh hoáº¡t, 
cho phÃ©p nhiá»u EC2 instances cÃ¹ng truy cáº­p chung má»™t há»‡ thá»‘ng file, giá»‘ng nhÆ° chia sáº» á»• Ä‘Ä©a máº¡ng (network drive).

1. Operating System (OS): Linux, Windows, or Mac OS
ÄÃ¢y lÃ  há»‡ Ä‘iá»u hÃ nh báº¡n cÃ i Ä‘áº·t trÃªn EC2 instance.
AWS há»— trá»£:
- Linux: Amazon Linux, Ubuntu, Red Hat, SUSE, CentOS
- Windows: Windows Server (2016, 2019, 2022â€¦)
- macOS: Mac EC2 dÃ nh cho phÃ¡t triá»ƒn á»©ng dá»¥ng iOS/macOS (giÃ¡ ráº¥t cao)
- Há»‡ Ä‘iá»u hÃ nh quyáº¿t Ä‘á»‹nh cÃ¡ch báº¡n cÃ i pháº§n má»m, báº£o máº­t vÃ  váº­n hÃ nh há»‡ thá»‘ng.

2. How much compute power & cores (CPU)
- Báº¡n chá»n loáº¡i EC2 instance (vÃ­ dá»¥: t3.micro, m5.large, c6a.xlarge,â€¦)
- Má»—i loáº¡i cÃ³ sá»‘ vCPU (virtual CPU) vÃ  sá»©c máº¡nh xá»­ lÃ½ khÃ¡c nhau.
VÃ­ dá»¥:
    * t2.micro â†’ 1 vCPU
    * m5.large â†’ 2 vCPU
    * c5.4xlarge â†’ 16 vCPU, dÃ nh cho xá»­ lÃ½ tÃ­nh toÃ¡n cao
    ğŸ’¡ CPU cÃ ng nhiá»u, xá»­ lÃ½ cÃ ng nhanh, nhÆ°ng giÃ¡ cÅ©ng tÄƒng.

3. How much random-access memory (RAM)
- CÃ¹ng vá»›i CPU, má»—i EC2 instance cÃ³ má»™t lÆ°á»£ng RAM (bá»™ nhá»›) cá»‘ Ä‘á»‹nh.
- RAM giÃºp cháº¡y á»©ng dá»¥ng, xá»­ lÃ½ dá»¯ liá»‡u nhanh.
- VÃ­ dá»¥:
    * t3.micro: 1 vCPU + 1 GB RAM
    * m5.large: 2 vCPU + 8 GB RAM
    * r6g.4xlarge: 16 vCPU + 128 GB RAM (dÃ nh cho há»‡ thá»‘ng nhiá»u bá»™ nhá»›)

4. How much storage space
4.1. Network-attached (EBS & EFS)
- EBS (Elastic Block Store):
  * á»” Ä‘Ä©a block gáº¯n vÃ o EC2
  * DÃ¹ng nhÆ° á»• cá»©ng C:\ hoáº·c /dev/xvda
CÃ³ thá»ƒ má»Ÿ rá»™ng, backup snapshot
- EFS (Elastic File System):
    * File system chia sáº» giá»¯a nhiá»u EC2
    * DÃ¹ng cho á»©ng dá»¥ng cáº§n chia sáº» file hoáº·c logs

4.2. Hardware (EC2 Instance Store)
- á»” Ä‘Ä©a váº­t lÃ½ gáº¯n trá»±c tiáº¿p vÃ o mÃ¡y chá»§ váº­t lÃ½ cháº¡y EC2
- Nhanh hÆ¡n EBS nhÆ°ng:
  * Dá»¯ liá»‡u máº¥t khi táº¯t EC2
  * KhÃ´ng backup Ä‘Æ°á»£c
- DÃ¹ng cho cache, dá»¯ liá»‡u táº¡m thá»i

5. Network card: speed of the card, Public IP address
- Má»—i EC2 cÃ³ card máº¡ng áº£o, bÄƒng thÃ´ng phá»¥ thuá»™c loáº¡i instance:
    t3.micro â†’ tháº¥p (~5 Mbps)
    c6i.4xlarge â†’ ~10 Gbps
- Báº¡n cÃ³ thá»ƒ gÃ¡n public IP Ä‘á»ƒ truy cáº­p tá»« Internet.
- Hoáº·c gÃ¡n Elastic IP (IP tÄ©nh) Ä‘á»ƒ giá»¯ cá»‘ Ä‘á»‹nh.

6. Firewall rules: security group
- Security Group lÃ  tÆ°á»ng lá»­a áº£o cho EC2
* Quy Ä‘á»‹nh:
- Cá»•ng nÃ o Ä‘Æ°á»£c má»Ÿ (22, 80, 443,...)
- Ai Ä‘Æ°á»£c phÃ©p truy cáº­p (IP hoáº·c CIDR)
* VÃ­ dá»¥:
- Cho phÃ©p SSH tá»« IP báº¡n: TCP 22, Source: your-IP/32
- Má»Ÿ web: TCP 80, Source: 0.0.0.0/0

7. Bootstrap script: EC2 User Data
- User Data lÃ  shell script hoáº·c cloud-init báº¡n chÃ¨n vÃ o lÃºc khá»Ÿi táº¡o EC2.
- NÃ³ sáº½ tá»± Ä‘á»™ng cháº¡y 1 láº§n duy nháº¥t khi EC2 khá»Ÿi Ä‘á»™ng láº§n Ä‘áº§u.
- DÃ¹ng Ä‘á»ƒ:
    CÃ i app (Apache, Dockerâ€¦)
    Update há»‡ thá»‘ng
    Pull code tá»« Git

BÃ i 33: Create an EC2 instance with EC2 User Data to have a Website Hands On
- VÃ o mÃ n hÃ¬nh console tÃ¬m -> EC2 -> Click instances bÃªn thanh sidebar -> chá»n launch instances
- Name and tags (EC2_Ubuntu)
- Quick Start (click chá»n Ubuntu)
- Key pair name - required (Ä‘áº·t tÃªn instance_Key_DevOps_On_AWS) -> Create key pair
- VPC - required (thay Ä‘á»•i thÃ nh devops-vpc bÃ i trÆ°á»›c Ä‘Ã£ táº¡o)
- Subnet chá»n devops-subnet-public2
- Auto-assign public IP (chá»n Enable)
- Security group name - required (devops_sg)
- configure storage (1x tÄƒng lÃªn 18) 
- click launch instance Ä‘á»ƒ táº¡o mÃ¡y chá»§
